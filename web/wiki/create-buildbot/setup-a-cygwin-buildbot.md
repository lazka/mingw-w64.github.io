# Setup a Cygwin Buildbot Slave

## Setup a Cygwin Buildbot Slave

Setting up a mingw-w64 cygwin buildbot slave requires the following.

-   Internet connection
-   at least 800mb of ram just for windows and buildbot, if you have
    other applications running as well they will need to be added to
    this figure.
-   Windows 32bit or 64bit. (Instructions tested with WindowsXP 64bit)

### Install Cygwin

You will need cygwin to create a cygwin hosted buildbot.

Download the latest
<a href="http://cygwin.com/setup.exe" rel="nofollow">setup.exe</a> from
<a href="http://www.cygwin.com" rel="nofollow">http://www.cygwin.com</a>  
Install the following packages  
NOTE : Exact package names are will be given, other packages with a
similar name will exist so make sure you select the exact same name. Use
the search text box.  
For the mingw-w64 builds

-   gcc4
-   make
-   automake
-   autoconf
-   bison
-   flex
-   libiconv
-   gperf

For installing buildbot

-   wget (usefull for installing buildbot)
-   python
-   cygrunsrv (for autostarting buildbot)

### Install buildbot

Proceedure for installing buildbot in cygwin, Open the cygwin shell
window.

Install easy\_install. This can be done by going to
<a href="http://pypi.python.org/pypi/setuptools"
rel="nofollow">http://pypi.python.org/pypi/setuptools</a> and
downloading the latest setuptools egg.  
Then open a cygwin command prompt, and run the egg using sh. EG :

    cd /tmp
    wget http://pypi.python.org/packages/2.5/s/setuptools/setuptools-0.6c8-py2.5.egg
    sh setuptools-0.6c8-py2.5.egg

Install twisted and buildbot: from the cygwin shell

    easy_install twisted
    easy_install buildbot-slave

### Creating the buildbot slave

Now create the buildbot slave, you will need to get the host and port
and provide a username and password, See [Buildbot Master Details](./buildbot-master-details.md).  
Choose a destination directory for the buildbot, This should have
several gigs of free space.  
This example assumes buildbot will be placed in
c:\\buildbots\\mingw-w64\\i686-pc-cygwin  
Replace the &lt;xxx&gt; placeholders with your details

    BUILDBOT_DIR=/cygdrive/c/buildbots/mingw-w64/i686-pc-cygwin
    mkdir -p ${BUILDBOT_DIR} && cd ${BUILDBOT_DIR}
    buildslave create-slave ${BUILDBOT_DIR} <buildbot_host>:<buildbot_port> <username> <password>

You can put any values in for the placeholders and then edit the
**buildbot.tac** file afterwards.  
Now is a good time to edit the buildbot information, This is in
BUILDBOT\_DIR/info, Edit these file to your liking. NOTE : They will be
publicly viewable.  
NOTE : If you have a buildbot.tac file form an older slave you should
replace it with a new one generated by the "buildslave create-slave ..."
command as they are sometimes incompatible. If you get missing import
errors when starting the slave and you've used an old buildbot.tac file
this is probably the cause.  
Start buildobt

    buildslave start ${BUILDBOT_DIR}

### Configure Buildbot Autostart

You will most likely want to configure buildbot to start automatically
when windows boots, These instructions will configure this and start
buildbot

    cygrunsrv.exe -I buildslave-mingw-w64 --path `which buildslave` --args "start ${BUILDBOT_DIR}" --env "PATH=/bin:/usr/bin:/usr/local/bin"
    buildslave stop ${BUILDBOT_DIR}
    cygrunsrv.exe --start buildslave-mingw-w64

Reboot and ensure your buildbot is connected by navigating to the
cygwin-x86-x86 builder at the [Buildbot Master
Details](./buildbot-master-details.md) page.
